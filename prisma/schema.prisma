generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model MenuItem {
  id         String  @id
  name       String
  category   String
  price      Float?
  extraNotes String?
  active     Boolean @default(true)
}

model Order {
  id          String      @id @default(cuid())
  tableNumber String
  waiterName  String
  timestamp   DateTime    @default(now())
  status      String      @default("pending")
  extraNotes  String?
  isExtra     Boolean     @default(false)
  parentId    String?
  items       OrderItem[]
}

model OrderItem {
  id         String  @id @default(cuid())
  name       String
  quantity   Int
  category   String
  itemStatus String  @default("pending")
  extraNotes String?
  orderId    String
  order      Order   @relation(fields: [orderId], references: [id])
  units      OrderItemUnit[]
}

model OrderItemUnit {
  id          String    @id @default(cuid())
  orderItemId String
  status      String    @default("pending")
  unitIndex   Int
  orderItem   OrderItem @relation(fields: [orderItemId], references: [id])

  @@index([orderItemId])
}
